<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "html-dtd/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xi="http://www.w3.org/2001/XInclude">
<head>

	<!-- $Id$ -->
	<!-- Copyright (C) 2011 Ian Moore (imoore76 at yahoo dot com) -->
	<title>phpVirtualBox - VirtualBox Web Console</title>

	<!-- Icon -->
	<link rel="shortcut icon" href="images/vbox/OSE/VirtualBox_win.ico"/>

	<!-- Meta fields. -->
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta http-equiv="Expires" content="0"/>
	<meta http-equiv="Cache-Control" content ="no-cache"/>
	<meta http-equiv="Cache-Control" content ="no-store, must-revalidate, max-age=0"/>
	<meta http-equiv="Cache-Control" content ="post-check=0, pre-check=0"/>
	<meta http-equiv="Pragma" content="no-cache"/>
	
	<!--  Style sheets -->
    <link rel="stylesheet" type="text/css" href="css/jquery-ui.css"/>
    <link rel="stylesheet" type="text/css" href="css/jquery.contextMenu.css"/>
	<link rel="stylesheet" type="text/css" href="css/tipped.css" />
	<link rel="stylesheet" type="text/css" href="css/jqueryFileTree.css" />
	<link rel="stylesheet" type="text/css" href="css/mediumselect.css"/>       
    <link rel="stylesheet" type="text/css" href="css/layout.css"/>

    <!-- External / vendor scripts -->
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/jquery-ui.js"></script>
    <script type="text/javascript" src="js/jquery.contextMenu.js"></script>
	<script type="text/javascript" src="js/jquery.tipped-1.5.min.js"></script>
	<script type="text/javascript" src="js/jqueryFileTree.js"></script>	
	<script type="text/javascript" src="js/jquery.scrollTo-min.js"></script>
	<script type="text/javascript" src="js/jquery.jec-1.2.5.js"></script>
	
	<!-- Oracle RDP Control -->
	<script type="text/javascript" src="rdpweb/webclient.js"></script>
	<script type="text/javascript" src="rdpweb/swfobject.js"></script>
	
	<!-- Internal Scripts -->
    <script type="text/javascript" src="js/language.php"></script>
	<script type="text/javascript" src="js/jquery.vbtree.js"></script>		
   	<script type="text/javascript" src="js/jquery.mediumselect.js"></script>
   	<script type="text/javascript" src="js/phpvirtualbox.js"></script>
    <script type="text/javascript" src="js/utils.js"></script>
	<script type="text/javascript" src="js/dialogs.js"></script>


	<!-- Main Setup -->
	<script type='text/javascript'>
	
		$(document).ready(function(){

			// If everything loaded correctly, trans() should be defined in
			// js/language.php. If not, there is a PHP error somewhere.
			if(typeof trans != "function") {
				trans = function(s){return s;}
				vboxAlert("An unknown PHP error occurred. This is most likely a syntax error in\
					config.php in phpVirtualBox's folder. The most common errors are an unclosed\
					 quote or a missing\
					semicolon in a configuration item that has been entered (e.g.\
					 location, username, or password).<p>Depending on your PHP configuration,\
					 navigating directly to <a href='config.php'>config.php</a> in your web\
					 browser may display the PHP error message.</p>\
					 <p>If find that this is not the case,\
					 or have no idea what this error message means, please raise the issue\
					 at <a href='http://code.google.com/p/phpvirtualbox/issues/list'\
					 >http://code.google.com/p/phpvirtualbox/issues/list</a></p>",{'width':'50%'});
				return;
			}

			/* Check for server setting */
			if(document.location.search) {
				var query = document.location.search.substr(1).split('&');
				for(var kv in query) {
					kv = query[kv].split('=');
					if(kv[0] == 'server') {
						var exp = new Date(2020,12,24);
						document.cookie = "vboxServer="+unescape(kv[1])+"; expires="+exp.toGMTString()+"; path=/";
					}
				}
			}
			
			// Data mediator ready for use
			dataMediator = new vboxDataMediator();

			var l = new vboxLoader();
			
			l.add('Config',function(d){$('#vboxIndex').data('vboxConfig',d);});
			l.add('GuestOSTypes',function(d){$('#vboxIndex').data('vboxOSTypes',d);});
			l.add('SystemProperties',function(d){$('#vboxIndex').data('vboxSystemProperties',d);});
			l.add('Mediums',function(d){$('#vboxIndex').data('vboxMediums',d);});
			l.add('HostDetails',function(d){$('#vboxIndex').data('vboxHostDetails',d);});

			l.addFile('panes/topmenu.html',function(f){$('#vboxIndex').append(f);},{});
			l.addFile('panes/tabs.html',function(f){$('#vboxPaneTabContent').append(f);},{})
			l.addFile('panes/vmlistToolbar.html',function(f){$('#vboxIndex').append(f);},{});
			l.addFile('panes/vmlist.html',function(f){$('#vboxPaneVMList').append(f);},{});

			l.onLoad = function() {
				
				// Check supported version
				vboxVersionCheck($('#vboxIndex').data('vboxConfig').version);

				// Resizable
				$('#vboxResizeBar').draggable({cursor:(jQuery.browser.opera ? 'e-resize' : 'col-resize'),axis:'x',zIndex:99,helper:function(){
					var r = $('#vboxResizeBar').clone();
					$(r).unbind('mouseleave');
					$(r).css('background','#cccccc');
					return r;
				},scroll:false,'start':function(e,ui){
					$('body').attr('unselectable','on').css({'-moz-user-select':'none','-webkit-user-select':'none'});
					var d = document.createElement('div');
					$(d).attr({'id':'vboxResizeOverlay','style':'width:100%;height:100%;border:0px;margin:0px;padding:0px;position:absolute;top:0px;left:0px;z-index:10;cursor:'+(jQuery.browser.opera ? 'e-resize' : 'col-resize')})
					$('#vboxIndex').append(d);
					document.body.style.cursor = (jQuery.browser.opera ? 'e-resize' : 'col-resize');
					$('#vboxResizeBar').data('vboxX',e.pageX);
					
				},'stop':function(e){

					$('#vboxResizeOverlay').remove();
					$('body').attr('unselectable','').css({'-moz-user-select':'','-webkit-user-select':''});
					
					document.body.style.cursor = 'default';

					var nx = $('#vboxVMList').width() + (e.pageX - $('#vboxResizeBar').data('vboxX'));
					$('#vboxVMList').css('width',(nx)+'px');

					// Constraint check
					if($('#vboxVMList').width() < $('#vboxVMList').parent().innerWidth())
						$('#vboxVMList').css('width',($('#vboxVMList').parent().innerWidth())+'px');
					
					var exp = new Date(2020,12,24);
					document.cookie = "vboxPaneX="+($('#vboxVMList').width())+"; expires="+exp.toGMTString()+"; path=/";
					
					$('#vboxPaneVMList').css('width',$('#vboxVMList').css('width'));
					
				}}).css('cursor',(jQuery.browser.opera ? 'e-resize' : 'col-resize')).bind('mouseenter',function(){
					$(this).css('background',"#cccccc");
				}).bind('mouseleave',function(){
					$(this).css('background',"");
				})[0].onselectstart = function () { return false; };
				
				// Resize to last setting
				vboxParseCookies();
				if($('#vboxIndex').data('vboxCookies')['vboxPaneX']) {
					$('#vboxVMList').css('width',($('#vboxIndex').data('vboxCookies')['vboxPaneX'])+'px');
				}
				
			}
			l.onShow = function() { $(window).trigger('resize'); }

			l.hideRoot = true;
			l.run();

			// Resize table elements
			$(window).resize(function(){
				
				$('#vboxResizePane').children().children().css({'display':'none'});
				
				var h = $('#vboxResize').innerHeight();
				$('#vboxResizePane').children().children().css({'height':h+'px','overflow':'auto','display':''});
				// special for resize bar
				$('#vboxResizeBar').css({'height':(h-10)+'px'});
				// special for bordered vm list
				$('#vboxPaneVMList').children().css({'height':(h-4)+'px'});

			});

			// Refresh data when host changes
			$('#vboxIndex').bind('hostChange',function(){
				var l = new vboxLoader();
				
				l.add('Config',function(d){$('#vboxIndex').data('vboxConfig',d);});
				l.add('GuestOSTypes',function(d){$('#vboxIndex').data('vboxOSTypes',d);});
				l.add('SystemProperties',function(d){$('#vboxIndex').data('vboxSystemProperties',d);});
				l.add('Mediums',function(d){$('#vboxIndex').data('vboxMediums',d);});
				l.add('HostDetails',function(d){$('#vboxIndex').data('vboxHostDetails',d);});

				l.run();
			});
			
		});
	</script>

</head>
<body>
<div id='vboxIndex' style='height: 100%'>
<table id='vboxTableMain' cellpadding=0 cellspacing=0 style="height: 100%; width: 100%; padding: 0px; margin: 0px; border: 0px; border-spacing: 0px;">
	<tr style='vertical-align: middle;'>
		<td style='height:20px;border:0px;padding:0px;margin:0px;border-spacing:0px;'>
			<div id='vboxMenu'>
				<!--
					Menu Bar will be placed here 
				 -->
			</div>
		</td>
	</tr>
	<tr style='vertical-align: middle;'>
		<td id='vboxToolbarMain' style='height: 70px; border:0px;padding:0px;margin:0px;border-spacing:0px;' class='vboxToolbarGrad'>
			<!-- VMList toolbar -->
			<div id='vboxPaneToolbar'></div>
			<!-- Tabs / Buttons -->
			<div id='vboxTabsList'></div>
		</td>
	</tr>
	<tr style='vertical-align: top;'>
		<td style='border:0px;padding:0px;margin:0px;border-spacing:0px;' id='vboxResize'>
			<table style='width:100%;border:0px;padding:0px;border-spacing:0px;margin:0px' id=''>
				<tr id='vboxResizePane' style='vertical-align: top;'>
					<td id="vboxPaneVMList" style='padding:0px;border-spacing:0px;margin:0px'>
						<!--
						
						VM List
							
						-->
					</td>
					<td id='vboxResizeTD' style='border: 0px; width: 2px; margin: 0px; padding: 0px; text-align: center;'>
						<div style='z-index: 99; position: absolute; margin:0px; margin-top: 2px; padding:2px; width: 0px; height: 90%;' id='vboxResizeBar' ></div>
					</td>
					<td id="vboxPaneTabContent" style='width:100%;border:0px;padding:0px;border-spacing:0px;margin:0px'>
						<!--
						
							Tab content will go here
						
						 -->
					</td>
				</tr>
			</table>
		</td>
	</tr>
</table>
</div>
</body>
</html>